<div class="map-layer-control">
  <button class="map-control-button layer-control-button" [class.active]="isExpanded" (click)="toggleControl($event)"
    aria-label="Contrôle de couches" title="Contrôle de couches">
    <i class="fas fa-layer-group"></i>
  </button>

  <div *ngIf="isExpanded" class="layer-control-menu" [@fadeIn]>
    <!-- Section Fournisseur de carte -->
    <div class="control-section">
      <div class="section-header">
        <i class="fas fa-map-marked-alt"></i>
        <span class="section-title">Fournisseur</span>
      </div>

      <div class="section-content">
        <div class="provider-options">
          <div class="provider-option" *ngFor="let provider of providerTypes">
            <input type="radio" name="provider" [id]="'provider-' + provider.value" [value]="provider.value"
              [checked]="provider.value === currentProvider" (change)="changeProvider(provider.value)" />
            <label [for]="'provider-' + provider.value">
              <i class="fas" [class.fa-globe]="provider.value === 'leaflet'"
                [class.fa-map]="provider.value === 'mapbox'"></i>
              {{ provider.label }}
            </label>
          </div>
        </div>
      </div>
    </div>

    <!-- Section Couches -->
    <div class="control-section">
      <div class="section-header">
        <i class="fas fa-layer-group"></i>
        <span class="section-title">Couches</span>
      </div>

      <div class="section-content">
        <div class="layer-list">
          <div *ngFor="let layer of layers" class="layer-item">
            <div class="layer-toggle">
              <input type="checkbox" [id]="'layer-' + layer.id" [checked]="layer.enabled"
                (change)="toggleLayer(layer.id, $event)" />
              <label [for]="'layer-' + layer.id">
                <i class="fas layer-type-icon" [class.fa-map]="layer.id === 'base-layer'"
                  [class.fa-marker]="layer.type === 'marker'" [class.fa-draw-polygon]="layer.type === 'geojson'"
                  [class.fa-object-group]="!layer.type || (layer.type !== 'marker' && layer.type !== 'geojson' && layer.id !== 'base-layer')"></i>
                {{ layer.name }}
              </label>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>